{
  "description": "Minimal dataset for unit tests. Can be loaded by pytest fixtures.",
  "users": [
    {
      "id": 1,
      "ha_user_id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
      "username": "TestParent",
      "role": "parent",
      "points": 0,
      "created_at": "2025-11-04T10:00:00",
      "updated_at": "2025-11-04T10:00:00"
    },
    {
      "id": 2,
      "ha_user_id": "b2c3d4e5-f6a7-8901-bcde-f12345678901",
      "username": "TestKid1",
      "role": "kid",
      "points": 25,
      "created_at": "2025-11-04T10:00:00",
      "updated_at": "2025-11-11T10:00:00"
    },
    {
      "id": 3,
      "ha_user_id": "c3d4e5f6-a7b8-9012-cdef-123456789012",
      "username": "TestKid2",
      "role": "kid",
      "points": 10,
      "created_at": "2025-11-04T10:00:00",
      "updated_at": "2025-11-11T10:00:00"
    }
  ],
  "chores": [
    {
      "id": 1,
      "name": "Take out trash",
      "description": "Roll bins to curb",
      "points": 5,
      "recurrence_type": "simple",
      "recurrence_pattern": "{\"type\": \"simple\", \"interval\": \"weekly\", \"every_n\": 1}",
      "start_date": "2025-11-01",
      "end_date": null,
      "assignment_type": "individual",
      "requires_approval": true,
      "auto_approve_after_hours": null,
      "created_by": 1,
      "created_at": "2025-11-04T10:00:00",
      "updated_at": "2025-11-04T10:00:00",
      "is_active": true
    },
    {
      "id": 2,
      "name": "Do dishes",
      "description": "Wash and put away dishes",
      "points": 8,
      "recurrence_type": "simple",
      "recurrence_pattern": "{\"type\": \"simple\", \"interval\": \"daily\", \"every_n\": 1}",
      "start_date": "2025-11-01",
      "end_date": null,
      "assignment_type": "individual",
      "requires_approval": true,
      "auto_approve_after_hours": null,
      "created_by": 1,
      "created_at": "2025-11-04T10:00:00",
      "updated_at": "2025-11-04T10:00:00",
      "is_active": true
    },
    {
      "id": 3,
      "name": "Clean room",
      "description": "Make bed, organize toys, vacuum",
      "points": 10,
      "recurrence_type": "complex",
      "recurrence_pattern": "{\"type\": \"complex\", \"days_of_week\": [6, 7]}",
      "start_date": "2025-11-01",
      "end_date": null,
      "assignment_type": "individual",
      "requires_approval": false,
      "auto_approve_after_hours": 24,
      "created_by": 1,
      "created_at": "2025-11-04T10:00:00",
      "updated_at": "2025-11-04T10:00:00",
      "is_active": true
    },
    {
      "id": 4,
      "name": "One-off task",
      "description": "Special task for today only",
      "points": 15,
      "recurrence_type": "none",
      "recurrence_pattern": null,
      "start_date": "2025-11-11",
      "end_date": "2025-11-11",
      "assignment_type": "individual",
      "requires_approval": true,
      "auto_approve_after_hours": null,
      "created_by": 1,
      "created_at": "2025-11-11T10:00:00",
      "updated_at": "2025-11-11T10:00:00",
      "is_active": true
    }
  ],
  "chore_assignments": [
    {
      "id": 1,
      "chore_id": 1,
      "user_id": 2,
      "due_date": null
    },
    {
      "id": 2,
      "chore_id": 2,
      "user_id": 2,
      "due_date": null
    },
    {
      "id": 3,
      "chore_id": 2,
      "user_id": 3,
      "due_date": null
    },
    {
      "id": 4,
      "chore_id": 3,
      "user_id": 3,
      "due_date": null
    },
    {
      "id": 5,
      "chore_id": 4,
      "user_id": 2,
      "due_date": "2025-11-11"
    }
  ],
  "chore_instances": [
    {
      "id": 1,
      "chore_id": 1,
      "due_date": "2025-11-11",
      "status": "assigned",
      "claimed_by": null,
      "claimed_at": null,
      "approved_by": null,
      "approved_at": null,
      "rejected_by": null,
      "rejected_at": null,
      "rejection_reason": null,
      "points_awarded": null,
      "created_at": "2025-11-11T08:00:00",
      "updated_at": "2025-11-11T08:00:00"
    },
    {
      "id": 2,
      "chore_id": 2,
      "due_date": "2025-11-10",
      "status": "claimed",
      "claimed_by": 2,
      "claimed_at": "2025-11-10T18:30:00",
      "approved_by": null,
      "approved_at": null,
      "rejected_by": null,
      "rejected_at": null,
      "rejection_reason": null,
      "points_awarded": null,
      "created_at": "2025-11-10T08:00:00",
      "updated_at": "2025-11-10T18:30:00"
    },
    {
      "id": 3,
      "chore_id": 2,
      "due_date": "2025-11-09",
      "status": "approved",
      "claimed_by": 2,
      "claimed_at": "2025-11-09T17:00:00",
      "approved_by": 1,
      "approved_at": "2025-11-09T19:00:00",
      "rejected_by": null,
      "rejected_at": null,
      "rejection_reason": null,
      "points_awarded": 8,
      "created_at": "2025-11-09T08:00:00",
      "updated_at": "2025-11-09T19:00:00"
    },
    {
      "id": 4,
      "chore_id": 2,
      "due_date": "2025-11-08",
      "status": "rejected",
      "claimed_by": 3,
      "claimed_at": "2025-11-08T16:00:00",
      "approved_by": null,
      "approved_at": null,
      "rejected_by": 1,
      "rejected_at": "2025-11-08T20:00:00",
      "rejection_reason": "Job not completed fully - missed spots",
      "points_awarded": null,
      "created_at": "2025-11-08T08:00:00",
      "updated_at": "2025-11-08T20:00:00"
    },
    {
      "id": 5,
      "chore_id": 3,
      "due_date": "2025-11-10",
      "status": "approved",
      "claimed_by": 3,
      "claimed_at": "2025-11-10T10:00:00",
      "approved_by": 1,
      "approved_at": "2025-11-10T11:00:00",
      "rejected_by": null,
      "rejected_at": null,
      "rejection_reason": null,
      "points_awarded": 10,
      "created_at": "2025-11-10T08:00:00",
      "updated_at": "2025-11-10T11:00:00"
    },
    {
      "id": 6,
      "chore_id": 1,
      "due_date": "2025-11-05",
      "status": "assigned",
      "claimed_by": null,
      "claimed_at": null,
      "approved_by": null,
      "approved_at": null,
      "rejected_by": null,
      "rejected_at": null,
      "rejection_reason": null,
      "points_awarded": null,
      "created_at": "2025-11-05T08:00:00",
      "updated_at": "2025-11-05T08:00:00",
      "comment": "Overdue chore - not completed"
    }
  ],
  "rewards": [
    {
      "id": 1,
      "name": "Ice cream trip",
      "description": "Trip to the ice cream shop",
      "points_cost": 20,
      "cooldown_days": null,
      "max_claims_total": null,
      "max_claims_per_kid": null,
      "is_active": true,
      "created_at": "2025-11-04T10:00:00",
      "updated_at": "2025-11-04T10:00:00"
    },
    {
      "id": 2,
      "name": "Extra screen time",
      "description": "30 minutes extra screen time",
      "points_cost": 15,
      "cooldown_days": 7,
      "max_claims_total": null,
      "max_claims_per_kid": null,
      "is_active": true,
      "created_at": "2025-11-04T10:00:00",
      "updated_at": "2025-11-04T10:00:00"
    },
    {
      "id": 3,
      "name": "Stay up late",
      "description": "Stay up 30 minutes past bedtime",
      "points_cost": 25,
      "cooldown_days": null,
      "max_claims_total": 10,
      "max_claims_per_kid": 2,
      "is_active": true,
      "created_at": "2025-11-04T10:00:00",
      "updated_at": "2025-11-04T10:00:00",
      "comment": "Limited reward - at claim limit edge case"
    }
  ],
  "reward_claims": [
    {
      "id": 1,
      "reward_id": 1,
      "user_id": 2,
      "points_spent": 20,
      "claimed_at": "2025-11-07T14:00:00",
      "status": "approved",
      "approved_by": 1,
      "approved_at": "2025-11-07T14:30:00"
    },
    {
      "id": 2,
      "reward_id": 2,
      "user_id": 3,
      "points_spent": 15,
      "claimed_at": "2025-11-06T18:00:00",
      "status": "approved",
      "approved_by": 1,
      "approved_at": "2025-11-06T18:15:00",
      "comment": "Recently claimed - on cooldown"
    },
    {
      "id": 3,
      "reward_id": 2,
      "user_id": 2,
      "points_spent": 15,
      "claimed_at": "2025-11-11T10:00:00",
      "status": "pending",
      "approved_by": null,
      "approved_at": null,
      "comment": "Pending approval"
    }
  ],
  "points_history": [
    {
      "id": 1,
      "user_id": 2,
      "points_delta": 8,
      "reason": "Completed chore (Do dishes)",
      "chore_instance_id": 3,
      "reward_claim_id": null,
      "created_by": 1,
      "created_at": "2025-11-09T19:00:00"
    },
    {
      "id": 2,
      "user_id": 2,
      "points_delta": -20,
      "reason": "Redeemed reward (Ice cream trip)",
      "chore_instance_id": null,
      "reward_claim_id": 1,
      "created_by": 2,
      "created_at": "2025-11-07T14:30:00"
    },
    {
      "id": 3,
      "user_id": 3,
      "points_delta": 10,
      "reason": "Completed chore (Clean room)",
      "chore_instance_id": 5,
      "reward_claim_id": null,
      "created_by": 1,
      "created_at": "2025-11-10T11:00:00"
    },
    {
      "id": 4,
      "user_id": 3,
      "points_delta": -15,
      "reason": "Redeemed reward (Extra screen time)",
      "chore_instance_id": null,
      "reward_claim_id": 2,
      "created_by": 3,
      "created_at": "2025-11-06T18:15:00"
    },
    {
      "id": 5,
      "user_id": 2,
      "points_delta": 10,
      "reason": "Bonus points for helping sibling",
      "chore_instance_id": null,
      "reward_claim_id": null,
      "created_by": 1,
      "created_at": "2025-11-05T20:00:00",
      "comment": "Manual adjustment edge case"
    },
    {
      "id": 6,
      "user_id": 2,
      "points_delta": 27,
      "reason": "Initial points balance from earlier completions",
      "chore_instance_id": null,
      "reward_claim_id": null,
      "created_by": 1,
      "created_at": "2025-11-04T10:00:00",
      "comment": "Historical balance"
    },
    {
      "id": 7,
      "user_id": 3,
      "points_delta": 15,
      "reason": "Initial points balance from earlier completions",
      "chore_instance_id": null,
      "reward_claim_id": null,
      "created_by": 1,
      "created_at": "2025-11-04T10:00:00",
      "comment": "Historical balance"
    }
  ],
  "edge_cases_covered": [
    "Chore with auto-approval enabled (chore_id: 3)",
    "Chore claimed but overdue (instance_id: 6)",
    "Kid with points from manual adjustment (user_id: 2, history_id: 5)",
    "Reward on cooldown (reward_id: 2, last claim_id: 2)",
    "Reward at claim limit (reward_id: 3, max_claims settings)",
    "Rejected chore instance (instance_id: 4)",
    "Pending reward claim (claim_id: 3)",
    "One-off chore (chore_id: 4)"
  ],
  "point_balance_verification": {
    "TestKid1": {
      "expected": 25,
      "calculation": "27 (initial) + 8 (chore) + 10 (bonus) - 20 (reward) = 25"
    },
    "TestKid2": {
      "expected": 10,
      "calculation": "15 (initial) + 10 (chore) - 15 (reward) = 10"
    }
  }
}
